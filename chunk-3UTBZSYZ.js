import{a as I}from"./chunk-37A5N7EJ.js";import{Y as S,Z as E,a as L,n as P}from"./chunk-NDSXAOUI.js";import{$a as h,Ab as y,Db as v,Eb as k,Rb as w,V as p,_ as u,ba as m,ka as d,kb as f,la as g,ta as b,tb as l,ub as _,xb as C}from"./chunk-PNCATDCG.js";import{i as o}from"./chunk-ODN5LVDJ.js";var i=class r extends L{static create(t){return new r({status:this.getHttpStatusCode(t)})}static getHttpStatusCode(t){return t.hint?.startsWith("http")?Number(t.hint.split("http")[0]):(console.warn('http error code missing on PostgrestError "hint" field. Error will be interpreted as ServerError 500.'),500)}constructor(t){super(t)}},M=class{constructor(t,e){this.pageIndex=t;this.pageSize=e;if(t<1)throw new Error("PageIndex hast to be at 1 or greater.");if(e>50)throw new Error("Max pageSize is 50")}get postgresPageValues(){return{offset_val:(this.pageIndex-1)*this.pageSize,limit_val:this.pageSize}}},a=class{totalElementsCount=null;pageIndex;pageSize;totalPagesCount=null;data=[];constructor(t,e,n){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize,e.length!==0&&(this.totalElementsCount=n[0].total_elements_count,this.totalPagesCount=Math.ceil(this.totalElementsCount/this.pageSize),this.data=e)}};var O=["*"],x=class r{iconButtonOnClickEvent=new b;_isLoading=h(!1);setIsLoading(t){this._isLoading.set(t)}getIsLoading(){return this._isLoading()}iconButtonOnClick(){this._isLoading()||this.iconButtonOnClickEvent.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=m({type:r,selectors:[["app-loadable-icon-button"]],outputs:{iconButtonOnClickEvent:"iconButtonOnClickEvent"},standalone:!0,features:[w],ngContentSelectors:O,decls:4,vars:1,consts:[["deleteButton",""],["mat-icon-button","",3,"click","disabled"]],template:function(e,n){if(e&1){let s=C();v(),l(0,"button",1,0),y("click",function(){return d(s),g(n.iconButtonOnClick())}),l(2,"mat-icon"),k(3),_()()}e&2&&f("disabled",n._isLoading())},dependencies:[E,S,I],changeDetection:0})};var B=class r{constructor(t){this.supabase=t}createList(t){return o(this,null,function*(){let{data:e,error:n}=yield this.supabase.instance.rpc("create_check_list",{name:t});if(console.log("res",{data:e,error:n}),n)throw i.create(n)})}updateCheckListName(t,e){return o(this,null,function*(){let{error:n}=yield this.supabase.instance.rpc("update_check_list_name",{p_id:t,p_name:e});if(n)throw i.create(n)})}getPageOfMyCheckLists(t){return o(this,null,function*(){let{data:e,error:n}=yield this.supabase.instance.rpc("get_my_check_lists_page",t.postgresPageValues);if(n)throw i.create(n);let s=e.map(c=>({id:c.id,name:c.name,createdAt:c.created_at}));return new a(t,s,e)})}getCheckListById(t){return o(this,null,function*(){let{data:e,error:n}=yield this.supabase.instance.rpc("get_check_list_by_id",{p_id:t});if(n)throw i.create(n);return e[0]})}deleteCheckListById(t){return o(this,null,function*(){let{error:e}=yield this.supabase.instance.rpc("delete_check_list",{p_id:t});if(e)throw i.create(e)})}static \u0275fac=function(e){return new(e||r)(u(P))};static \u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"})};export{i as a,M as b,a as c,x as d,B as e};
