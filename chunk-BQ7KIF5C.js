import{a as D,b as L,d as O,e as d,f as E,g,h as P,j as k,k as I,l as W}from"./chunk-2QUMMQPE.js";import{a as b}from"./chunk-C4DWSRUZ.js";import{X as w,Z as S,_ as x,h as M,o as _}from"./chunk-KSJPD3HX.js";import"./chunk-X5YLR3NI.js";import"./chunk-B2B2T4TM.js";import{$a as u,Ab as y,Mb as l,Qa as r,R as p,Ra as c,Rb as F,ba as h,f as C,gb as v,kb as s,ob as f,tb as a,ub as t,vb as m}from"./chunk-PNCATDCG.js";import"./chunk-ODN5LVDJ.js";function T(o,n){o&1&&m(0,"mat-spinner",5)}function A(o,n){o&1&&(a(0,"div",6),l(1,"Wrong username or password."),t())}var R=class o{constructor(n,i){this.router=n;this.authService=i;this.passwordFormControl.valueChanges.pipe(p(this.onDestroy)).subscribe(()=>this.isWrongCredentials.set(!1)),this.emailFormControl.valueChanges.pipe(p(this.onDestroy)).subscribe(()=>this.isWrongCredentials.set(!1))}emailFormControl=new g("",[d.required,d.email]);passwordFormControl=new g("",[d.required]);isLoading=u(!1);isWrongCredentials=u(!1);onDestroy=new C;ngOnDestroy(){this.onDestroy.next()}loginOnClick(){if(this.emailFormControl.valid===!1||this.passwordFormControl.valid===!1)return;this.isLoading.set(!0);let n=this.emailFormControl.value,i=this.passwordFormControl.value;this.authService.login(n,i).then(()=>this.router.navigate([x.landing.path])).catch(()=>this.isWrongCredentials.set(!0)).finally(()=>this.isLoading.set(!1))}static \u0275fac=function(i){return new(i||o)(c(M),c(_))};static \u0275cmp=h({type:o,selectors:[["app-login"]],standalone:!0,features:[F],decls:15,vars:5,consts:[["id","input-container"],["appearance","outline"],["type","email","matInput","","placeholder","my.email@provider.de",3,"formControl"],["type","password","matInput","",3,"formControl"],["mat-stroked-button","",3,"click","disabled"],["diameter","20"],[1,"error"]],template:function(i,e){i&1&&(a(0,"h1"),l(1,"Login"),t(),a(2,"div",0)(3,"mat-form-field",1)(4,"mat-label"),l(5,"Email"),t(),m(6,"input",2),t(),a(7,"mat-form-field",1)(8,"mat-label"),l(9,"Password"),t(),m(10,"input",3),t(),a(11,"button",4),y("click",function(){return e.loginOnClick()}),l(12,"Login"),t(),v(13,T,1,0,"mat-spinner",5)(14,A,2,0,"div",6),t()),i&2&&(r(6),s("formControl",e.emailFormControl),r(4),s("formControl",e.passwordFormControl),r(),s("disabled",e.isLoading()||e.isWrongCredentials()||!e.emailFormControl.valid||!e.passwordFormControl.valid),r(2),f(e.isLoading()?13:-1),r(),f(e.isWrongCredentials()?14:-1))},dependencies:[S,w,W,I,L,D,k,O,E,P,b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}#input-container[_ngcontent-%COMP%]{width:100%;max-width:20em;display:flex;flex-direction:column}#input-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}#input-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{align-self:center}"],changeDetection:0})};export{R as LoginComponent};
